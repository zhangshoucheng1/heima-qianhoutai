(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63782e1e"],{"0170":function(t,s,e){"use strict";var a=e("0f7a"),i=e.n(a);i.a},"0f7a":function(t,s,e){},"3caf":function(t,s,e){"use strict";var a=e("73df"),i=e.n(a);i.a},"73df":function(t,s,e){},deee:function(t,s,e){"use strict";e.r(s);var a,i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"page docs-view"},[e("div",{staticClass:"view-header"},[e("pageHeader",{attrs:{fullWidth:!0}},[["sheet","axure"].includes(t.type)?e("div",{staticClass:"document-title"},[t._v(t._s(t.documentData.title))]):t._e(),e("div",{staticClass:"inline-block",attrs:{slot:"right-slot"},slot:"right-slot"},[t.isLogined?e("div",{staticClass:"docs-operation inline-block"},[e("documentComBtn",{attrs:{documentId:t.documentData._id,star:t.documentData.starStatus,collect:t.documentData.collectStatus},on:{starCount:t.starCountChange}}),e("span",{staticClass:"cut-line"})],1):t._e()]),e("div",{staticClass:"inline-block",attrs:{slot:"left-slot"},slot:"left-slot"},[["axure"].includes(t.type)?e("div",{staticClass:"paddingL30"},[e("el-button",{attrs:{size:"mini",icon:"el-icon-arrow-left"},on:{click:t.routerGoBack}},[t._v("返回")])],1):t._e()])])],1),!t.loading&&t.hasPermission?e("div",{staticClass:"view-body-wrapper"},["docs"===t.type?e("docsView",{attrs:{author:t.author,document:t.documentData,content:t.documentData.content}}):t._e(),"sheet"===t.type?e("sheetView",{attrs:{author:t.author,document:t.documentData,content:t.documentData.content}}):t._e(),"axure"===t.type?e("axureView",{attrs:{author:t.author,document:t.documentData,content:t.documentData.content}}):t._e()],1):t._e(),t.loading||!t.hasPermission?e("div",{staticClass:"view-body-wrapper"},[t._m(0),t.showNoPermissionTips?e("div",{staticClass:"wa-tips-wrapper"},[e("div",{staticClass:"wa-tips-main"},[t._m(1),e("div",{staticClass:"tips-text-wrapper"},[t._v("\n          "+t._s(t.title||"无访问权限，该文档只对团队内部可见！")+"\n        ")])])]):t._e(),t.showPasswordCheck?e("div",{staticClass:"wa-tips-wrapper"},[e("div",{staticClass:"wa-tips-main"},[t._m(2),e("div",{staticClass:"check-pass-input-wrapper"},[e("div",{staticClass:"check-pass-input"},[e("el-input",{attrs:{placeholder:"输入访问密码","prefix-icon":"el-icon-lock"},model:{value:t.pass,callback:function(s){t.pass=s},expression:"pass"}})],1),e("div",{staticClass:"check-pass-btn"},[e("el-button",{attrs:{type:"primary"},on:{click:t.checkPass}},[t._v("确 认")])],1)])])]):t._e()]):t._e()])},n=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"skeleton-wrapper layout-container"},[e("div",{staticClass:"skeleton-title chiaroscuro"}),e("div",{staticClass:"skeleton-content-item chiaroscuro"}),e("div",{staticClass:"skeleton-content-item chiaroscuro"}),e("div",{staticClass:"skeleton-content-item chiaroscuro"}),e("div",{staticClass:"skeleton-content-item chiaroscuro"}),e("div",{staticClass:"skeleton-title chiaroscuro"}),e("div",{staticClass:"skeleton-content-item chiaroscuro"}),e("div",{staticClass:"skeleton-content-item chiaroscuro"}),e("div",{staticClass:"skeleton-content-item chiaroscuro"}),e("div",{staticClass:"skeleton-title chiaroscuro"}),e("div",{staticClass:"skeleton-content-item chiaroscuro"}),e("div",{staticClass:"skeleton-content-item chiaroscuro"})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"tips-wrapper"},[e("i",{staticClass:"el-icon-warning"})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"check-pass-title"},[e("i",{staticClass:"el-icon-warning"}),t._v("\n          该文档为私密文档，请输入密码\n        ")])}],c=e("ce3c"),o=(e("b764"),e("2984"),e("77bb")),r=e.n(o),u=(e("cc57"),e("e8bd"),e("3f00")),l=e.n(u),d=e("7c0b"),h=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",{staticClass:"document-com-btn-wrapper"},[e("li",{class:{active:t.starStatus}},[t.starStatus?e("i",{staticClass:"iconfont icon-dianzan cursor-pointer",on:{click:function(s){return t.starFn(!t.starStatus)}}}):e("i",{staticClass:"iconfont icon-dianzan1 cursor-pointer",on:{click:function(s){return t.starFn(!t.starStatus)}}}),t._v("\n    点赞\n  ")]),e("li",{class:{active:t.collectStatus}},[t.collectStatus?e("i",{staticClass:"iconfont icon-shoucang1 cursor-pointer",on:{click:function(s){return t.collectFn(!t.collectStatus)}}}):e("i",{staticClass:"iconfont icon-shoucang cursor-pointer",on:{click:function(s){return t.collectFn(!t.collectStatus)}}}),t._v("\n    收藏\n  ")])])},m=[],p={name:"document-com-btn",props:{documentId:String,star:Boolean,collect:Boolean},data:function(){return{starStatus:!1,collectStatus:!1}},created:function(){this.starStatus=this.star,this.collectStatus=this.collect},watch:{star:function(t){this.starStatus=t},collect:function(t){this.collectStatus=t}},methods:{starFn:function(t){var s=this;this.$API.starDocument({id:this.documentId,status:!!t}).then((function(){s.starStatus=!!t,t?s.$emit("starCount",1):s.$emit("starCount",-1)}))},collectFn:function(t){var s=this;this.$API.collectDocument({id:this.documentId,status:!!t}).then((function(){s.collectStatus=!!t}))}}},v=p,f=(e("3caf"),e("9ca4")),C=Object(f["a"])(v,h,m,!1,null,"e143187e",null),w=C.exports,k=0,_={components:(a={pageHeader:d["a"],documentComBtn:w},Object(c["a"])(a,l.a.name,l.a),Object(c["a"])(a,r.a.name,r.a),Object(c["a"])(a,"docsView",(function(){return Promise.all([e.e("chunk-67da7162"),e.e("chunk-c108eb08")]).then(e.bind(null,"8145"))})),Object(c["a"])(a,"sheetView",(function(){return Promise.all([e.e("chunk-69757b4a"),e.e("chunk-5ead0492")]).then(e.bind(null,"25ed"))})),Object(c["a"])(a,"axureView",(function(){return e.e("chunk-58478a4f").then(e.bind(null,"d684"))})),a),data:function(){return{hasPermission:!1,loading:!0,id:"",type:"",documentData:{},author:{},authority:{edit:!1,needLogin:!0,read:!0,visitType:""},showNoPermissionTips:!1,showPasswordCheck:!1,pass:""}},computed:{isLogined:function(){return this.$store.state.user.access_token}},created:function(){this.id=this.$route.query.id,this.type=this.$route.query.type,this.getData(),k=window.history.length},methods:{getData:function(){var t=this;this.loading=!0,this.$API.getDocumentDetail({id:this.id,isVisit:!0}).then((function(s){var e=s.body;t.documentData=e.document,t.author=e.author,t.authority=e.authority,t.permission(),t.loading=!1}))},permission:function(){this.hasPermission=this.authority.read,this.hasPermission||"private"===this.authority.visitType?this.hasPermission||"private"!==this.authority.visitType||(this.showPasswordCheck=!0):this.showNoPermissionTips=!0},checkPass:function(){var t=this;this.$API.documentCheckPass({documentId:this.documentData._id,pass:this.pass}).then((function(s){s.body?(t.showPasswordCheck=!1,t.hasPermission=!0):t.$message.error("访问密码错误，请重试！")}))},starCountChange:function(t){this.documentData.star_count=this.documentData.star_count+t},routerGoBack:function(){window.history.go(k-window.history.length-1)}}},b=_,y=(e("0170"),Object(f["a"])(b,i,n,!1,null,"5472f564",null));s["default"]=y.exports}}]);